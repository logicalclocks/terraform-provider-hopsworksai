---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "Resource hopsworksai_cluster - terraform-provider-hopsworksai"
subcategory: ""
description: |-
  Use this resource to create, read, update, and delete clusters on Hopsworks.ai.
---
# Resource (hopsworksai_cluster)
Use this resource to create, read, update, and delete clusters on Hopsworks.ai.

## Example Usage

### AWS Example Usage 

```terraform
resource "hopsworksai_cluster" "cluster" {
  name    = "my-cluster-name"
  ssh_key = "my-ssh-key"

  head {
  }

  aws_attributes {
    region               = "us-east-2"
    instance_profile_arn = "arn:aws:iam::0000000000:instance-profile/my-instance-profile"
    bucket_name          = "my-bucket"
  }

  open_ports {
    ssh = true
  }

  tags = {
    "Purpose" = "testing"
  }
}
```

### Azure Example Usage 

```terraform
resource "hopsworksai_cluster" "cluster" {
  name    = "myclustername"
  ssh_key = "my-ssh-key"

  head {
  }

  azure_attributes {
    location                       = "northeurope"
    resource_group                 = "mygroup"
    storage_account                = "mystorage"
    user_assigned_managed_identity = "my-identity"
  }

  open_ports {
    ssh = true
  }

  tags = {
    "Purpose" = "testing"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **head** (Block List, Min: 1, Max: 1) The configurations of the head node of the cluster. (see [below for nested schema](#nestedblock--head))
- **name** (String) The name of the cluster, must be unique.
- **ssh_key** (String) The ssh key name that will be attached to this cluster.

### Optional

- **attach_public_ip** (Boolean) Attach or do not attach a public ip to the cluster. This can be useful if you intend to create a cluster in a private network. Defaults to `true`.
- **autoscale** (Block List, Max: 1) Setup auto scaling. (see [below for nested schema](#nestedblock--autoscale))
- **aws_attributes** (Block List, Max: 1) The configurations required to run the cluster on Amazon AWS. (see [below for nested schema](#nestedblock--aws_attributes))
- **azure_attributes** (Block List, Max: 1) The configurations required to run the cluster on Microsoft Azure. (see [below for nested schema](#nestedblock--azure_attributes))
- **backup_retention_period** (Number) The validity of cluster backups in days. If set to 0 cluster backups are disabled. Defaults to `0`.
- **id** (String) The ID of this resource.
- **issue_lets_encrypt_certificate** (Boolean) Enable or disable issuing let's encrypt certificates. This can be used to disable issuing certificates if port 80 can not be open. Defaults to `true`.
- **managed_users** (Boolean) Enable or disable Hopsworks.ai to manage your users. Defaults to `true`.
- **open_ports** (Block List, Max: 1) Open the required ports to communicate with one of the Hopsworks services. (see [below for nested schema](#nestedblock--open_ports))
- **rondb** (Block List, Max: 1) Setup a cluster with managed RonDB. (see [below for nested schema](#nestedblock--rondb))
- **tags** (Map of String) The list of custom tags to be attached to the cluster.
- **timeouts** (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- **update_state** (String) The action you can use to start or stop the cluster. Defaults to `none`.
- **version** (String) The version of the cluster. Defaults to `2.2.0`.
- **workers** (Block Set) The configurations of worker nodes. You can add as many as you want of this block to create workers with different configurations. (see [below for nested schema](#nestedblock--workers))

### Read-Only

- **activation_state** (String) The current activation state of the cluster.
- **cluster_id** (String) The Id of the cluster.
- **creation_date** (String) The creation date of the cluster. The date is represented in RFC3339 format.
- **start_date** (String) The starting date of the cluster. The date is represented in RFC3339 format.
- **state** (String) The current state of the cluster.
- **url** (String) The url generated to access the cluster.

<a id="nestedblock--head"></a>
### Nested Schema for `head`

Optional:

- **disk_size** (Number) The disk size of the head node in units of GB. Defaults to `512`.
- **instance_type** (String) The instance type of the head node. Defaults to m5.2xlarge for AWS and Standard_D8_v3 for Azure.


<a id="nestedblock--autoscale"></a>
### Nested Schema for `autoscale`

Required:

- **non_gpu_workers** (Block List, Min: 1, Max: 1) Setup auto scaling for non gpu nodes. (see [below for nested schema](#nestedblock--autoscale--non_gpu_workers))

Optional:

- **gpu_workers** (Block List, Max: 1) Setup auto scaling for gpu nodes. (see [below for nested schema](#nestedblock--autoscale--gpu_workers))

<a id="nestedblock--autoscale--non_gpu_workers"></a>
### Nested Schema for `autoscale.non_gpu_workers`

Required:

- **instance_type** (String) The instance type to use while auto scaling.

Optional:

- **disk_size** (Number) The disk size to use while auto scaling Defaults to `512`.
- **downscale_wait_time** (Number) The time to wait before removing unused resources. Defaults to `300`.
- **max_workers** (Number) The maximum number of workers created by auto scaling. Defaults to `10`.
- **min_workers** (Number) The minimum number of workers created by auto scaling. Defaults to `0`.
- **standby_workers** (Number) The percentage of workers to be always available during auto scaling. If you set this value to 0 new workers will only be added when a job or a notebook requests the resources. This attribute will not be taken into account if you set the minimum number of workers to 0 and no resources are used in the cluster, instead, it will start to take effect as soon as you start using resources. Defaults to `0.5`.


<a id="nestedblock--autoscale--gpu_workers"></a>
### Nested Schema for `autoscale.gpu_workers`

Required:

- **instance_type** (String) The instance type to use while auto scaling.

Optional:

- **disk_size** (Number) The disk size to use while auto scaling Defaults to `512`.
- **downscale_wait_time** (Number) The time to wait before removing unused resources. Defaults to `300`.
- **max_workers** (Number) The maximum number of workers created by auto scaling. Defaults to `10`.
- **min_workers** (Number) The minimum number of workers created by auto scaling. Defaults to `0`.
- **standby_workers** (Number) The percentage of workers to be always available during auto scaling. If you set this value to 0 new workers will only be added when a job or a notebook requests the resources. This attribute will not be taken into account if you set the minimum number of workers to 0 and no resources are used in the cluster, instead, it will start to take effect as soon as you start using resources. Defaults to `0.5`.



<a id="nestedblock--aws_attributes"></a>
### Nested Schema for `aws_attributes`

Required:

- **bucket_name** (String) The name of the S3 bucket that the cluster will use to store data in.
- **instance_profile_arn** (String) The ARN of the AWS instance profile that the cluster will be started with.
- **region** (String) The AWS region where the cluster will be created.

Optional:

- **ecr_registry_account_id** (String) The account id used for ECR. Defaults to the user's account id, inferred from the instance profille ARN.
- **eks_cluster_name** (String) The name of the AWS EKS cluster.
- **network** (Block List, Max: 1) The network configurations. (see [below for nested schema](#nestedblock--aws_attributes--network))

<a id="nestedblock--aws_attributes--network"></a>
### Nested Schema for `aws_attributes.network`

Optional:

- **security_group_id** (String) The security group id.
- **subnet_id** (String) The subnet id.
- **vpc_id** (String) The VPC id.



<a id="nestedblock--azure_attributes"></a>
### Nested Schema for `azure_attributes`

Required:

- **location** (String) The location where the cluster will be created.
- **resource_group** (String) The resource group where the cluster will be created.
- **storage_account** (String) The azure storage account that the cluster will use to store data in.
- **user_assigned_managed_identity** (String) The azure user assigned managed identity that the cluster will be started with.

Optional:

- **acr_registry_name** (String) The name of the ACR registry.
- **aks_cluster_name** (String) The name of the AKS cluster.
- **network** (Block List, Max: 1) The network configurations. (see [below for nested schema](#nestedblock--azure_attributes--network))
- **storage_container_name** (String) The name of the azure storage container that the cluster will use to store data in. If not specified, it will be automatically generated.

<a id="nestedblock--azure_attributes--network"></a>
### Nested Schema for `azure_attributes.network`

Optional:

- **security_group_name** (String) The security group name.
- **subnet_name** (String) The subnet name.
- **virtual_network_name** (String) The virtual network name.



<a id="nestedblock--open_ports"></a>
### Nested Schema for `open_ports`

Optional:

- **feature_store** (Boolean) Open the required ports to access the feature store from outside Hopsworks. Defaults to `false`.
- **kafka** (Boolean) Open the required ports to access kafka from outside Hopsworks. Defaults to `false`.
- **online_feature_store** (Boolean) Open the required ports to access the online feature store from outside Hopsworks. Defaults to `false`.
- **ssh** (Boolean) Open the ssh port (22) to allow ssh access to your cluster. Defaults to `false`.


<a id="nestedblock--rondb"></a>
### Nested Schema for `rondb`

Optional:

- **api_nodes** (Block List, Max: 1) The configuration of API nodes. (see [below for nested schema](#nestedblock--rondb--api_nodes))
- **configuration** (Block List, Max: 1) The configuration of RonDB. (see [below for nested schema](#nestedblock--rondb--configuration))
- **data_nodes** (Block List, Max: 1) The configuration of RonDB data nodes. (see [below for nested schema](#nestedblock--rondb--data_nodes))
- **management_nodes** (Block List, Max: 1) The configuration of RonDB management nodes. (see [below for nested schema](#nestedblock--rondb--management_nodes))
- **mysql_nodes** (Block List, Max: 1) The configuration of MySQL nodes. (see [below for nested schema](#nestedblock--rondb--mysql_nodes))

<a id="nestedblock--rondb--api_nodes"></a>
### Nested Schema for `rondb.api_nodes`

Optional:

- **count** (Number) The number of API nodes. Defaults to `0`.
- **disk_size** (Number) The disk size of API nodes in units of GB Defaults to `30`.
- **instance_type** (String) The instance type of the RonDB data node. Defaults to t3a.medium for AWS and Standard_D2s_v4 for Azure.


<a id="nestedblock--rondb--configuration"></a>
### Nested Schema for `rondb.configuration`

Optional:

- **general** (Block List, Max: 1) The general configurations of RonDB. (see [below for nested schema](#nestedblock--rondb--configuration--general))
- **ndbd_default** (Block List, Max: 1) The configuration of RonDB data nodes. (see [below for nested schema](#nestedblock--rondb--configuration--ndbd_default))

<a id="nestedblock--rondb--configuration--general"></a>
### Nested Schema for `rondb.configuration.general`

Optional:

- **benchmark** (Block List, Max: 1) The configurations required to benchmark RonDB. (see [below for nested schema](#nestedblock--rondb--configuration--general--benchmark))

<a id="nestedblock--rondb--configuration--general--benchmark"></a>
### Nested Schema for `rondb.configuration.general.benchmark`

Optional:

- **grant_user_privileges** (Boolean) This allow API nodes to have user privileges access to RonDB. This is needed mainly for benchmarking and for that you need API nodes. Defaults to `false`.



<a id="nestedblock--rondb--configuration--ndbd_default"></a>
### Nested Schema for `rondb.configuration.ndbd_default`

Optional:

- **replication_factor** (Number) The number of replicas created by RonDB for high availability. Defaults to `2`.



<a id="nestedblock--rondb--data_nodes"></a>
### Nested Schema for `rondb.data_nodes`

Optional:

- **count** (Number) The number of data nodes. Notice that the number of RonDB data nodes have to be multiples of the replication_factor. Defaults to `2`.
- **disk_size** (Number) The disk size of data nodes in units of GB Defaults to `512`.
- **instance_type** (String) The instance type of the RonDB data node. Defaults to t3a.xlarge for AWS and Standard_D4s_v4 for Azure.


<a id="nestedblock--rondb--management_nodes"></a>
### Nested Schema for `rondb.management_nodes`

Optional:

- **count** (Number) The number of management nodes. Defaults to `1`.
- **disk_size** (Number) The disk size of management nodes in units of GB Defaults to `30`.
- **instance_type** (String) The instance type of the RonDB management node. Defaults to t3a.medium for AWS and Standard_D2s_v4 for Azure.


<a id="nestedblock--rondb--mysql_nodes"></a>
### Nested Schema for `rondb.mysql_nodes`

Optional:

- **count** (Number) The number of MySQL nodes. Defaults to `1`.
- **disk_size** (Number) The disk size of MySQL nodes in units of GB Defaults to `128`.
- **instance_type** (String) The instance type of the RonDB data node. Defaults to t3a.medium for AWS and Standard_D2s_v4 for Azure.



<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- **create** (String)
- **delete** (String)
- **read** (String)
- **update** (String)


<a id="nestedblock--workers"></a>
### Nested Schema for `workers`

Required:

- **instance_type** (String) The instance type of the worker nodes.

Optional:

- **count** (Number) The number of worker nodes. Defaults to `1`.
- **disk_size** (Number) The disk size of worker nodes in units of GB Defaults to `512`.

## Import

Import is supported using the following syntax:
```shell
terraform import hopsworksai_cluster.my_cluster <cluster_id>
```
