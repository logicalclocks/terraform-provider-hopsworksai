---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "hopsworksai_cluster_from_backup Resource - terraform-provider-hopsworksai"
subcategory: ""
description: |-
  Use this resource to create a cluster from an existing backup.
---

# hopsworksai_cluster_from_backup (Resource)

Use this resource to create a cluster from an existing backup.

## Example Usage

```terraform
resource "hopsworksai_cluster_from_backup" "cluster" {
  source_backup_id = "<BACKUP ID>"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `source_backup_id` (String)

### Optional

- `autoscale` (Block List, Max: 1) Setup auto scaling. (see [below for nested schema](#nestedblock--autoscale))
- `aws_attributes` (Block List, Max: 1) The configurations required to run the cluster on Amazon AWS. (see [below for nested schema](#nestedblock--aws_attributes))
- `azure_attributes` (Block List, Max: 1) The configurations required to run the cluster on Microsoft Azure. (see [below for nested schema](#nestedblock--azure_attributes))
- `name` (String) The name of the cluster, must be unique.
- `open_ports` (Block List, Max: 1) Open the required ports to communicate with one of the Hopsworks services. (see [below for nested schema](#nestedblock--open_ports))
- `ssh_key` (String) The ssh key name that will be attached to this cluster.
- `tags` (Map of String) The list of custom tags to be attached to the cluster.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- `update_state` (String) The action you can use to start or stop the cluster. It has to be one of these values [none, start, stop]. Defaults to `none`.
- `workers` (Block Set) The configurations of worker nodes. You can add as many as you want of this block to create workers with different configurations. (see [below for nested schema](#nestedblock--workers))

### Read-Only

- `activation_state` (String) The current activation state of the cluster.
- `attach_public_ip` (Boolean) Attach or do not attach a public ip to the cluster. This can be useful if you intend to create a cluster in a private network.
- `backup_retention_period` (Number) The validity of cluster backups in days. If set to 0 cluster backups are disabled.
- `cluster_domain_prefix` (String) Use a specific prefix in the Cluster's domain name instead of a UUID. This option is available only to users with necessary privileges.
- `cluster_id` (String) The Id of the cluster.
- `collect_logs` (Boolean) Push services' logs to AWS cloud watch.
- `creation_date` (String) The creation date of the cluster. The date is represented in RFC3339 format.
- `custom_hosted_zone` (String) Override the default cloud.hopsworks.ai Hosted Zone. This option is available only to users with necessary privileges.
- `deactivate_hopsworksai_log_collection` (Boolean) Allow Hopsworks.ai to collect services logs to help diagnose issues with the cluster. By deactivating this option, you will not be able to get full support from our teams.
- `head` (List of Object) The configurations of the head node of the cluster. (see [below for nested schema](#nestedatt--head))
- `id` (String) The ID of this resource.
- `init_script` (String) A bash script that will run on all nodes during their initialization (must start with #!/usr/bin/env bash)
- `issue_lets_encrypt_certificate` (Boolean) Enable or disable issuing let's encrypt certificates. This can be used to disable issuing certificates if port 80 can not be open.
- `managed_users` (Boolean) Enable or disable Hopsworks.ai to manage your users.
- `os` (String) The operating system to use for the instances. Supported systems are ubuntu in all regions and centos in some specific regions
- `rondb` (List of Object) Setup a cluster with managed RonDB. (see [below for nested schema](#nestedatt--rondb))
- `run_init_script_first` (Boolean) Run the init script before any other node initialization. WARNING if your initscript interfere with the following node initialization the cluster may not start properly. Make sure that you know what you are doing.
- `start_date` (String) The starting date of the cluster. The date is represented in RFC3339 format.
- `state` (String) The current state of the cluster.
- `upgrade_in_progress` (List of Object) Information about ongoing cluster upgrade if any. (see [below for nested schema](#nestedatt--upgrade_in_progress))
- `url` (String) The url generated to access the cluster.
- `version` (String) The version of the cluster. For existing clusters, you can change this attribute to upgrade to a newer version of Hopsworks. If the upgrade process ended up in an error state, you can always rollback to the old version by resetting this attribute to the old version.

<a id="nestedblock--autoscale"></a>
### Nested Schema for `autoscale`

Required:

- `non_gpu_workers` (Block List, Min: 1, Max: 1) Setup auto scaling for non gpu nodes. (see [below for nested schema](#nestedblock--autoscale--non_gpu_workers))

Optional:

- `gpu_workers` (Block List, Max: 1) Setup auto scaling for gpu nodes. (see [below for nested schema](#nestedblock--autoscale--gpu_workers))

<a id="nestedblock--autoscale--non_gpu_workers"></a>
### Nested Schema for `autoscale.non_gpu_workers`

Required:

- `instance_type` (String) The instance type to use while auto scaling.

Optional:

- `disk_size` (Number) The disk size to use while auto scaling Defaults to `512`.
- `downscale_wait_time` (Number) The time to wait before removing unused resources. Defaults to `300`.
- `max_workers` (Number) The maximum number of workers created by auto scaling. Defaults to `10`.
- `min_workers` (Number) The minimum number of workers created by auto scaling. Defaults to `0`.
- `spot_config` (Block List, Max: 1) The configuration to use spot instances (see [below for nested schema](#nestedblock--autoscale--non_gpu_workers--spot_config))
- `standby_workers` (Number) The percentage of workers to be always available during auto scaling. If you set this value to 0 new workers will only be added when a job or a notebook requests the resources. This attribute will not be taken into account if you set the minimum number of workers to 0 and no resources are used in the cluster, instead, it will start to take effect as soon as you start using resources. Defaults to `0.5`.

<a id="nestedblock--autoscale--non_gpu_workers--spot_config"></a>
### Nested Schema for `autoscale.non_gpu_workers.spot_config`

Optional:

- `fall_back_on_demand` (Boolean) Fall back to on demand instance if unable to allocate a spot instance Defaults to `true`.
- `max_price_percent` (Number) The maximum spot instance price in percentage of the on-demand price. Defaults to `100`.



<a id="nestedblock--autoscale--gpu_workers"></a>
### Nested Schema for `autoscale.gpu_workers`

Required:

- `instance_type` (String) The instance type to use while auto scaling.

Optional:

- `disk_size` (Number) The disk size to use while auto scaling Defaults to `512`.
- `downscale_wait_time` (Number) The time to wait before removing unused resources. Defaults to `300`.
- `max_workers` (Number) The maximum number of workers created by auto scaling. Defaults to `10`.
- `min_workers` (Number) The minimum number of workers created by auto scaling. Defaults to `0`.
- `spot_config` (Block List, Max: 1) The configuration to use spot instances (see [below for nested schema](#nestedblock--autoscale--gpu_workers--spot_config))
- `standby_workers` (Number) The percentage of workers to be always available during auto scaling. If you set this value to 0 new workers will only be added when a job or a notebook requests the resources. This attribute will not be taken into account if you set the minimum number of workers to 0 and no resources are used in the cluster, instead, it will start to take effect as soon as you start using resources. Defaults to `0.5`.

<a id="nestedblock--autoscale--gpu_workers--spot_config"></a>
### Nested Schema for `autoscale.gpu_workers.spot_config`

Optional:

- `fall_back_on_demand` (Boolean) Fall back to on demand instance if unable to allocate a spot instance Defaults to `true`.
- `max_price_percent` (Number) The maximum spot instance price in percentage of the on-demand price. Defaults to `100`.




<a id="nestedblock--aws_attributes"></a>
### Nested Schema for `aws_attributes`

Optional:

- `instance_profile_arn` (String) The ARN of the AWS instance profile that the cluster will be started with.
- `network` (Block List, Max: 1) The network configurations. (see [below for nested schema](#nestedblock--aws_attributes--network))

Read-Only:

- `bucket` (List of Object) The bucket configurations. (see [below for nested schema](#nestedatt--aws_attributes--bucket))
- `ebs_encryption` (List of Object) The EBS disk encryption configuration. (see [below for nested schema](#nestedatt--aws_attributes--ebs_encryption))
- `ecr_registry_account_id` (String) The account id used for ECR. Defaults to the user's account id, inferred from the instance profille ARN.
- `eks_cluster_name` (String) The name of the AWS EKS cluster.
- `region` (String) The AWS region where the cluster will be created.

<a id="nestedblock--aws_attributes--network"></a>
### Nested Schema for `aws_attributes.network`

Required:

- `subnet_id` (String) The subnet id.
- `vpc_id` (String) The VPC id.

Optional:

- `security_group_id` (String) The security group id.


<a id="nestedatt--aws_attributes--bucket"></a>
### Nested Schema for `aws_attributes.bucket`

Read-Only:

- `acl` (List of Object) (see [below for nested schema](#nestedobjatt--aws_attributes--bucket--acl))
- `encryption` (List of Object) (see [below for nested schema](#nestedobjatt--aws_attributes--bucket--encryption))
- `name` (String)

<a id="nestedobjatt--aws_attributes--bucket--acl"></a>
### Nested Schema for `aws_attributes.bucket.acl`

Read-Only:

- `bucket_owner_full_control` (Boolean)


<a id="nestedobjatt--aws_attributes--bucket--encryption"></a>
### Nested Schema for `aws_attributes.bucket.encryption`

Read-Only:

- `bucket_key` (Boolean)
- `kms_type` (String)
- `mode` (String)
- `user_key_arn` (String)



<a id="nestedatt--aws_attributes--ebs_encryption"></a>
### Nested Schema for `aws_attributes.ebs_encryption`

Read-Only:

- `kms_key` (String)



<a id="nestedblock--azure_attributes"></a>
### Nested Schema for `azure_attributes`

Optional:

- `network` (Block List, Max: 1) The network configurations. (see [below for nested schema](#nestedblock--azure_attributes--network))

Read-Only:

- `acr_registry_name` (String) The name of the ACR registry.
- `aks_cluster_name` (String) The name of the AKS cluster.
- `container` (List of Object) The container configurations. (see [below for nested schema](#nestedatt--azure_attributes--container))
- `location` (String) The location where the cluster will be created.
- `resource_group` (String) The resource group where the cluster will be created.
- `user_assigned_managed_identity` (String) The azure user assigned managed identity that the cluster will be started with.

<a id="nestedblock--azure_attributes--network"></a>
### Nested Schema for `azure_attributes.network`

Required:

- `subnet_name` (String) The subnet name.
- `virtual_network_name` (String) The virtual network name.

Optional:

- `resource_group` (String) The resource group where the network resources reside. If not specified, the azure_attributes/resource_group will be used.
- `search_domain` (String) The search domain to use for node address resolution. If not specified it will use the Azure default one (internal.cloudapp.net).
- `security_group_name` (String) The security group name.


<a id="nestedatt--azure_attributes--container"></a>
### Nested Schema for `azure_attributes.container`

Read-Only:

- `encryption` (List of Object) (see [below for nested schema](#nestedobjatt--azure_attributes--container--encryption))
- `name` (String)
- `storage_account` (String)

<a id="nestedobjatt--azure_attributes--container--encryption"></a>
### Nested Schema for `azure_attributes.container.encryption`

Read-Only:

- `mode` (String)




<a id="nestedblock--open_ports"></a>
### Nested Schema for `open_ports`

Optional:

- `feature_store` (Boolean) Open the required ports to access the feature store from outside Hopsworks. Defaults to `false`.
- `kafka` (Boolean) Open the required ports to access kafka from outside Hopsworks. Defaults to `false`.
- `online_feature_store` (Boolean) Open the required ports to access the online feature store from outside Hopsworks. Defaults to `false`.
- `ssh` (Boolean) Open the ssh port (22) to allow ssh access to your cluster. Defaults to `false`.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `read` (String)
- `update` (String)


<a id="nestedblock--workers"></a>
### Nested Schema for `workers`

Required:

- `instance_type` (String) The instance type of the worker nodes.

Optional:

- `count` (Number) The number of worker nodes. Defaults to `1`.
- `disk_size` (Number) The disk size of worker nodes in units of GB Defaults to `512`.
- `spot_config` (Block List, Max: 1) The configuration to use spot instances (see [below for nested schema](#nestedblock--workers--spot_config))

Read-Only:

- `private_ips` (List of String) Array containing the private IPs of the nodes

<a id="nestedblock--workers--spot_config"></a>
### Nested Schema for `workers.spot_config`

Optional:

- `fall_back_on_demand` (Boolean) Fall back to on demand instance if unable to allocate a spot instance Defaults to `true`.
- `max_price_percent` (Number) The maximum spot instance price in percentage of the on-demand price. Defaults to `100`.



<a id="nestedatt--head"></a>
### Nested Schema for `head`

Read-Only:

- `disk_size` (Number)
- `ha_enabled` (Boolean)
- `instance_type` (String)
- `node_id` (String)
- `private_ip` (String)


<a id="nestedatt--rondb"></a>
### Nested Schema for `rondb`

Read-Only:

- `api_nodes` (List of Object) (see [below for nested schema](#nestedobjatt--rondb--api_nodes))
- `configuration` (List of Object) (see [below for nested schema](#nestedobjatt--rondb--configuration))
- `data_nodes` (List of Object) (see [below for nested schema](#nestedobjatt--rondb--data_nodes))
- `management_nodes` (List of Object) (see [below for nested schema](#nestedobjatt--rondb--management_nodes))
- `mysql_nodes` (List of Object) (see [below for nested schema](#nestedobjatt--rondb--mysql_nodes))
- `single_node` (List of Object) (see [below for nested schema](#nestedobjatt--rondb--single_node))

<a id="nestedobjatt--rondb--api_nodes"></a>
### Nested Schema for `rondb.api_nodes`

Read-Only:

- `count` (Number)
- `disk_size` (Number)
- `instance_type` (String)
- `private_ips` (List of String)


<a id="nestedobjatt--rondb--configuration"></a>
### Nested Schema for `rondb.configuration`

Read-Only:

- `general` (List of Object) (see [below for nested schema](#nestedobjatt--rondb--configuration--general))
- `ndbd_default` (List of Object) (see [below for nested schema](#nestedobjatt--rondb--configuration--ndbd_default))

<a id="nestedobjatt--rondb--configuration--general"></a>
### Nested Schema for `rondb.configuration.general`

Read-Only:

- `benchmark` (List of Object) (see [below for nested schema](#nestedobjatt--rondb--configuration--general--benchmark))

<a id="nestedobjatt--rondb--configuration--general--benchmark"></a>
### Nested Schema for `rondb.configuration.general.benchmark`

Read-Only:

- `grant_user_privileges` (Boolean)



<a id="nestedobjatt--rondb--configuration--ndbd_default"></a>
### Nested Schema for `rondb.configuration.ndbd_default`

Read-Only:

- `replication_factor` (Number)



<a id="nestedobjatt--rondb--data_nodes"></a>
### Nested Schema for `rondb.data_nodes`

Read-Only:

- `count` (Number)
- `disk_size` (Number)
- `instance_type` (String)
- `private_ips` (List of String)


<a id="nestedobjatt--rondb--management_nodes"></a>
### Nested Schema for `rondb.management_nodes`

Read-Only:

- `count` (Number)
- `disk_size` (Number)
- `instance_type` (String)
- `private_ips` (List of String)


<a id="nestedobjatt--rondb--mysql_nodes"></a>
### Nested Schema for `rondb.mysql_nodes`

Read-Only:

- `count` (Number)
- `disk_size` (Number)
- `instance_type` (String)
- `private_ips` (List of String)


<a id="nestedobjatt--rondb--single_node"></a>
### Nested Schema for `rondb.single_node`

Read-Only:

- `disk_size` (Number)
- `instance_type` (String)
- `private_ips` (List of String)



<a id="nestedatt--upgrade_in_progress"></a>
### Nested Schema for `upgrade_in_progress`

Read-Only:

- `from_version` (String)
- `to_version` (String)


